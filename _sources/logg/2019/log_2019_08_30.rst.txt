Fredag 30.08 2019
+++++++++++++++++

A-TWAIN heat content
''''''''''''''''''''

Code: *make_Q_prelim_2013_2017.py*.

Sanity check for value of *Q*:
||||||||||||||||||||||||||||||

- *Mean temperature, 0-100 m:* 0.64C
- *Mean difference relative to Tmin*: 3.10C

.. math::
    Q = \int_{-100}^0 c_p\rho (T-T_{min})\ dz\\

    Q \sim c_p\ \bar{\rho} \overline{T-T_{min}}\int_{-100}^0\ dz

    Q\sim (4000\ \text{J/kg/C})(1000\ \text{kg/m}^3)(3\ C)(100\ m)

    Q\sim 1.2\times10^{9}\ J m^{-2}

Mean value of Q for the whole water column: :math:`1.27 \times10^{9} J m^{-2}`.

(:math:`\rightarrow` **Looks good**).

Data and plotting
|||||||||||||||||

Saved as Bunch (*data/processed_mooring_data/Q_prelim.p*).

Generated a nice-looking plot of CTD mooring variables and Q
(*data/processind_and_data/quick_data_plot_ctd.py*).
Passed on to Arild.


A-TWAIN currents
''''''''''''''''


ERA
'''
Checked that the download script is actually fine (*dl_era_winds.py* - removing
the obsolete *get_erawinds.py*).

iPython remote netCDF4/Opendap issue
''''''''''''''''''''''''''''''''''''

No idea why, but the issue (cannot retrieve remote opendap data with
*netCDF4.Dataset*) seems to be retated to the matplotlib backend, which by
default was *Qt5Agg*. I don't get the same issue when using *TkAgg*, and some
other plotting scripts run fine using *TkAgg*.

Backend needs to be loaded (e.g. *mpl.use('tkagg')*) after loading *mpl*, before
loading *plt*.


-> Loading *TkAgg* as default (implemented in *oyv.imports*). netCF4 opendap
   interfacing now seems to work fine. 

Not at all sure what was going on, or what the difference between backends are.
Going to leave for now since things are functioning. 


Do, Friday:
'''''''''''

- Finish Q time series.**X**
- Create current time series.

- Create master Bunch and make some plots.


- Fix Era loading script, or recover old one (get_erawinds.py now grabs SIC..).**X**
- Try EOF stuff.

- Plan FjordEco seminar..
